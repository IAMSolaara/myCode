.model small
.stack 100h
.data
N1      DB	0
N2      DB	0
TEN	DB	10
RIS	DB	0
R	DB	0
MSG1 	DB	"Inserisci primo numero.$"
MSG2 	DB	"Inserisci secondo numero.$"
MSG3 	DB	"Il risultato e' $"
MSG4 	DB	"Il resto e' $"
MSG5	DB	"Inserisci l'operatore.$"
TMP0	DB	0
TMP1	DB	0
TMP2	DB	0
OP	DB	0

LEGGI MACRO N
	MOV AH,01h
	INT 21h
	SUB AL,48
	MUL TEN
	MOV N,AL
	MOV AH,01h
	INT 21h
	SUB AL,48
	ADD N,AL	
	ENDM
OPREAD MACRO N
	MOV AH,01h
	INT 21h
	MOV N,AL	
	ENDM
STRING MACRO MSG
	LEA DX,MSG
	MOV AH,09h
	INT 21h
	ENDM
CAPO MACRO
	MOV DL,13
	MOV AH,02h
	INT 21h
	MOV DL,10
	MOV AH,02h
	INT 21h
	ENDM
SCRIVI MACRO CHR
	MOV AX,0
	MOV AL,CHR
	DIV TEN
	MOV TMP1,AL
	MOV TMP2,AH
	MOV DL,TMP1
	ADD DL,48
	MOV AH,02h
	INT 21h
	MOV DL,TMP2
	ADD DL,48
	MOV AH,02h
	INT 21h
	ENDM

.code
INIZIO:	MOV AX,@DATA
	MOV DS,AX
	STRING MSG1
	CAPO
	LEGGI N1
	CAPO
	STRING MSG2
	CAPO
	LEGGI N2
	CAPO
RILEGGI:STRING MSG5
	CAPO
	OPREAD OP
	CAPO
	;comparaziony
	CMP OP,'+'
	JE SOMMA
	CMP OP,'-'
	JE DIFF
	CMP OP,'*'
	JE PROD
	CMP OP,'/'
	JE DIVIS
	JMP RILEGGI
PROD:	MOV AL,N1
	MUL N2
	MOV RIS,AL
	JMP FINE
DIVIS:	MOV AL,N1
	MOV AH,0
	DIV N2
	MOV RIS,AL
	MOV R,AH
	JMP FINE
SOMMA:	MOV AL,N1
	ADD AL,N2
	MOV RIS,AL
	JMP FINE
DIFF:	MOV AL,N1
	SUB AL,N2
	MOV RIS,AL
	JMP FINE
FINE:	STRING MSG3
	SCRIVI RIS
	CAPO
	STRING MSG4
	SCRIVI R
	MOV AH,4Ch
	INT 21h
	END INIZIO