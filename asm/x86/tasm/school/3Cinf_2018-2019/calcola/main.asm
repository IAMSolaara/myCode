.model small
.stack 100h
.data
N1      DB	0
N2      DB	0
TEN	DB	10
RIS     DB	0
RIS2	DB	0
RIS3	DB	0
Q	DB	0
R	DB	0
MSG1 	DB	"Inserisci primo numero.$"
MSG2 	DB	"Inserisci secondo numero.$"
MSG3 	DB	"La somma e' $"
MSG4 	DB	"La differenza e' $"
MSG5 	DB	"Il prodotto e' $"
MSG6 	DB	"Il quoziente e' $"
MSG7 	DB	"Il resto e' $"
MSG8	DB	"Inserisci l'operatore.$"
TMP0	DB	0
TMP1	DB	0
TMP2	DB	0
OP	DB	0

ERROREMSG	DB	"Si e' verificato un errore.$"

LEGGI MACRO N
	MOV AH,01h
	INT 21h
	SUB AL,48
	MUL TEN
	MOV N,AL
	MOV AH,01h
	INT 21h
	SUB AL,48
	ADD N,AL	
	ENDM
OPREAD MACRO N
	MOV AH,01h
	INT 21h
	MOV N,AL	
	ENDM
STRING MACRO MSG
	LEA DX,MSG
	MOV AH,09h
	INT 21h
	ENDM
CAPO MACRO
	MOV DL,13
	MOV AH,02h
	INT 21h
	MOV DL,10
	MOV AH,02h
	INT 21h
	ENDM
SCRIVI MACRO CHR
	MOV AX,0
	MOV AL,CHR
	DIV TEN
	MOV TMP1,AL
	MOV TMP2,AH
	MOV DL,TMP1
	ADD DL,48
	MOV AH,02h
	INT 21h
	MOV DL,TMP2
	ADD DL,48
	MOV AH,02h
	INT 21h
	ENDM

.code
INIZIO:
	MOV AX,@DATA
	MOV DS,AX
	STRING MSG1
	CAPO
	LEGGI N1
	CAPO
	STRING MSG2
	CAPO
	LEGGI N2
	CAPO
	STRING MSG8
	CAPO
rileggi:	OPREAD OP
	CAPO
	;comparaziony
	CMP AL,'+'
	JE SOMMA
	CMP AL,'-'
	JE DIFF
	CMP AL,'*'
	JE PROD
	CMP AL,'/'
	JE DIVIS
	JMP rileggi
SOMMA:
	MOV AL,N1
	ADD AL,N2
	MOV RIS,AL
	STRING MSG3
	SCRIVI RIS
	CAPO
	JMP FINE
DIFF:
	MOV AL,N1
	SUB AL,N2
	MOV RIS2,AL
	STRING MSG4
	SCRIVI RIS2
	CAPO
	JMP FINE
PROD:
	MOV AL,N1
	MUL N2
	MOV RIS3,AL
	STRING MSG5
	SCRIVI RIS3
	CAPO
	JMP FINE
DIVIS:
	MOV AL,N1
	MOV AH,0
	DIV N2
	MOV Q,AL
	MOV R,AH
	STRING MSG6
	SCRIVI Q
	CAPO
	STRING MSG7
	SCRIVI R
	CAPO
	

FINE:
	MOV AH,4Ch
	INT 21h
	END INIZIO
