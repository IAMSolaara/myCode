#include <stdio.h>
#include <stdlib.h>

//funzione per stampare un carattere partendo da coordinate determinate
void draw(char num[9][5], int x0, int y0);
//funzione wrapper di draw che prende dal parametro le singole cifre e le stampia
void print7Seg(char nums[10][9][5], int n);

void main(int argv, char** argc){
	if (argv == 1) printf("Please supply at least 1 parameter.\n");
	else {
		//array 3dimensionale coi numeri
		char numbers[10][9][5] =
		{
			{//0
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '}
			},
			{//1
				{' ', ' ', ' ', ' ', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', ' '}
			},
			{//2
				{' ', '#', '#', '#', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{' ', '#', '#', '#', ' '}
			},
			{//3
				{' ', '#', '#', '#', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '}
			},
			{//4
				{' ', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', ' '}
			},
			{//5
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{' ', '#', '#', '#', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '}
			},
			{//6
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{'#', ' ', ' ', ' ', ' '},
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '}
			},
			{//7
				{' ', '#', '#', '#', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', ' '}
			},
			{//8
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '}
			},
			{//9
				{' ', '#', '#', '#', ' '},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{'#', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', ' ', ' ', ' ', '#'},
				{' ', '#', '#', '#', ' '}
			}
		};
		//clear terminale
		printf("\e[2J");
		//stampare numero passato come parametro
		print7Seg(numbers, atoi(argc[1]));
	}
}

void print7Seg(char nums[10][9][5], int n) {
	//variabili delle singole cifre
	int units      = n % 10;
	int tens       = (n / 10) % 10;
	int hundreds   = (n / 100) % 10;
	int thousands  = (n / 1000) % 10;

	draw(nums[thousands],  1, 1);     //stampa cifra migliaia
	draw(nums[hundreds], 11, 1);      //stampa cifra centinaia
	draw(nums[tens],     21, 1);      //stampa cifra decine
	draw(nums[units],    31, 1);      //stampa cifra unita'

}

void draw(char num[9][5], int x0, int y0 ){
	for (int i = 0; i < 9; i++) {             //loop righe numero
		for (int j = 0; j < 5; j++) {         //loop colonne numero
			printf("\e[%i;%iH", i+y0, j+x0);  //vai a coordinate (i,j) con offset x0 e y0
			printf("%c", num[i][j]);          //stampa il carattere dal numero
		} 
	}
}
